!function(e){e.add("plugin","video",{translations:{en:{video:"Video","video-html-code":"Video Embed Code or Youtube/Vimeo Link"}},modals:{video:'<form action="">                     <div class="form-item">                         <label>## video-html-code ## <span class="req">*</span></label>                         <textarea name="video" style="height: 160px;"></textarea>                     </div>                 </form>'},init:function(e){this.app=e,this.lang=e.lang,this.opts=e.opts,this.toolbar=e.toolbar,this.component=e.component,this.insertion=e.insertion,this.inspector=e.inspector},onmodal:{video:{opened:function(e,t){t.getField("video").focus()},insert:function(e,t){var i=t.getData();this._insert(i)}}},oncontextbar:function(e,t){var i=this.inspector.parse(e.target);if(i.isComponentType("video")){var o=i.getComponent(),n={remove:{title:this.lang.get("delete"),api:"plugin.video.remove",args:o}};t.set(e,o,n,"bottom")}},start:function(){var e={title:this.lang.get("video"),api:"plugin.video.open"};this.toolbar.addButtonAfter("image","video",e).setIcon('<i class="re-icon-video"></i>')},open:function(){var e={title:this.lang.get("video"),width:"600px",name:"video",handle:"insert",commands:{insert:{title:this.lang.get("insert")},cancel:{title:this.lang.get("cancel")}}};this.app.api("module.modal.build",e)},remove:function(e){this.component.remove(e)},_insert:function(e){if(this.app.api("module.modal.close"),""!==e.video.trim()&&(e.video=this._matchData(e.video),this._isVideoIframe(e.video))){var t=this.component.create("video",e.video);this.insertion.insertHtml(t)}},_isVideoIframe:function(e){return null!==e.match(/<iframe|<video/gi)},_matchData:function(e){var t='<iframe style="width: 500px; height: 281px;" src="',i='" frameborder="0" allowfullscreen></iframe>';if(this._isVideoIframe(e)){var o=["iframe","video"],n=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;e=e.replace(n,function(e,t){return-1===o.indexOf(t.toLowerCase())?"":e})}return e.match(this.opts.regex.youtube)?e=e.replace(this.opts.regex.youtube,t+"//www.youtube.com/embed/$1"+i):e.match(this.opts.regex.vimeo)&&(e=e.replace(this.opts.regex.vimeo,t+"//player.vimeo.com/video/$2"+i)),e}})}(Redactor),function(e){e.add("class","video.component",{mixins:["dom","component"],init:function(e,t){return this.app=e,t&&void 0!==t.cmnt?t:this._init(t)},_init:function(t){if(void 0!==t){var i=e.dom(t).closest("figure");0!==i.length?this.parse(i):(this.parse("<figure>"),this.append(t))}else this.parse("<figure>");this._initWrapper()},_initWrapper:function(){this.addClass("redactor-component"),this.attr({"data-redactor-type":"video",tabindex:"-1",contenteditable:!1})}})}(Redactor);